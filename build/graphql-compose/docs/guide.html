<html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Quick Start Guide · graphql-compose</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Quick Start Guide · graphql-compose"/><meta property="og:type" content="website"/><meta property="og:url" content="https://github.com/graphql-compose/graphql-compose/graphql-compose/index.html"/><meta property="og:description" content="This guide will help you to easily create GraphQL Schemas that covers all your needs. We&#x27;ll start by giving you information on how to install Graphql Composer. After that we create Type Composer objects (GraphQLObjectTypes that are editable), edit the TypeComposers with custom fields, setup relations, and generate a schema that you can use."/><link rel="shortcut icon" href="/graphql-compose/img/logo.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/graphql-compose/css/main.css"/></head><body class="sideNavVisible doc"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/graphql-compose/"><img class="logo" src="/graphql-compose/img/logo.png"/><h2 class="headerTitle">graphql-compose</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive siteNavItemActive"><a href="/graphql-compose/docs/guide.html" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/graphql-compose/docs/api-reference.html" target="_self">API</a></li><li class=""><a href="/graphql-compose/en/help.html" target="_self">Support</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Introduction</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/prerequisites.html">Prerequisites</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/installation.html">Installation</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/graphql-compose/docs/guide.html">Quick Start Guide</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guide</h3><ul><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/generate-typecomposer.html">Generate TypeComposer</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/edit-typecomposer.html">Edit TypeComposer</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/relations.html">Relations</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/mutations.html">Mutation</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/generating-schema.html">Generating Schema</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/relay.html">Relay</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/api-reference.html">API Reference</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/api-typecomposer.html">TypeComposer</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/api-inputtypecomposer.html">InputTypeComposer</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/api-resolver.html">Resolver</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/api-typemapper.html">TypeMapper</a></li><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/api-gqc.html">GQC</a></li></ul></div><div class="navGroup navGroupActive"><h3>Plugins</h3><ul><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/plugins.html">Plugins</a></li></ul></div><div class="navGroup navGroupActive"><h3>Advanced</h3><ul><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/advanced.html">Advanced</a></li></ul></div><div class="navGroup navGroupActive"><h3>Demos</h3><ul><li class="navListItem"><a class="navItem" href="/graphql-compose/docs/demos.html">Live Demos</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1>Quick Start Guide</h1></header><article><div><span><p>This guide will help you to easily create GraphQL Schemas that covers all your needs. We'll start by giving you information on how to install Graphql Composer. After that we create Type Composer objects (GraphQLObjectTypes that are editable), edit the TypeComposers with custom fields, setup relations, and generate a schema that you can use.</p>
<p>At the end we'll add a relay support to the graphql.</p>
<p>We always try to make our documentation better, so if you have feedback on the Guide please let us know via <a href="https://github.com/nodkz/graphql-compose/issues/new">opening an Issue in our Github repository</a></p>
<h2><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting started</h2>
<ul>
<li><a href="generate-typecomposer.html">Generate TypeComposer</a></li>
<li><a href="edit-typecomposer.html">Edit TypeComposer</a></li>
<li><a href="relations.html">Relations</a></li>
<li><a href="mutations.html">Mutations</a></li>
<li><a href="generating-schema.html">Generate Schema</a></li>
<li><a href="relay.html">Relay support</a></li>
</ul>
<p><a href="http://graphql.org/">GraphQL</a> – is a query language for APIs. <a href="https://github.com/graphql/graphql-js">graphql-js</a> is the reference implementation of GraphQL for nodejs which introduce GraphQL type system for describing schema <em>(definition over configuration)</em> and executes queries on the server side. <a href="https://github.com/graphql/express-graphql">express-graphql</a> is a HTTP server which gets request data, passes it to <code>graphql-js</code> and returned result passes to response.</p>
<p><strong><code>graphql-compose</code></strong> – the <em>imperative tool</em> which worked on top of <code>graphql-js</code>. It provides some methods for creating types and GraphQL Models (so I call types with a list of common resolvers) for further building of complex relations in your schema.</p>
<ul>
<li>provides methods for editing GraphQL output/input types (add/remove fields/args/interfaces)</li>
<li>introduces <code>Resolver</code>s – the named graphql fieldConfigs, which can be used for finding, updating, removing records</li>
<li>provides an easy way for creating relations between types via <code>Resolver</code>s</li>
<li>provides converter from <code>OutputType</code> to <code>InputType</code></li>
<li>provides <code>projection</code> parser from AST</li>
<li>provides <code>GraphQL schema language</code> for defining simple types</li>
<li>adds additional types <code>Date</code>, <code>Json</code></li>
</ul>
<p><strong><code>graphql-compose-[plugin]</code></strong> – is a <em>declarative generators/plugins</em> that build on top of <code>graphql-compose</code>, which take some ORMs, schema definitions and creates GraphQL Models from them or modify existed GraphQL Types.</p>
<p>Type generator plugins:</p>
<ul>
<li><a href="https://github.com/graphql-compose/graphql-compose-json">graphql-compose-json</a> - generates GraphQL type from JSON (a good helper for wrapping REST APIs)</li>
<li><a href="https://github.com/graphql-compose/graphql-compose-mongoose">graphql-compose-mongoose</a> - generates GraphQL types from mongoose (MongoDB models) with Resolvers.</li>
<li><a href="https://github.com/graphql-compose/graphql-compose-elasticsearch">graphql-compose-elasticsearch</a> - generates GraphQL types from elastic mappings; ElasticSearch REST API proxy via GraphQL.</li>
<li><a href="https://github.com/graphql-compose/graphql-compose-aws">graphql-compose-aws</a> - expose AWS Cloud API via GraphQL</li>
</ul>
<p>Utility plugins:</p>
<ul>
<li><a href="https://github.com/graphql-compose/graphql-compose-relay">graphql-compose-relay</a> - reassemble GraphQL types with <code>Relay</code> specific things, like <code>Node</code> type and interface, <code>globalId</code>, <code>clientMutationId</code>.</li>
<li><a href="https://github.com/graphql-compose/graphql-compose-connection">graphql-compose-connection</a> - generates <code>connection</code> Resolver from <code>findMany</code> and <code>count</code> Resolvers.</li>
<li><a href="https://github.com/stoffern/graphql-compose-dataloader">graphql-compose-dataloader</a> - add DataLoader to graphql-composer resolvers.</li>
<li><a href="https://github.com/digithun/graphql-compose-recompose">graphql-compose-recompose</a> - utility that wrap GraphQL compose to high order functional pattern [work in process].</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h2>
<p>city.js</p>
<pre><code class="hljs css js"><span class="hljs-keyword">import</span> { TypeComposer} <span class="hljs-keyword">from</span> <span class="hljs-string">'graphql-compose'</span>;
<span class="hljs-keyword">import</span> { CountryTC } <span class="hljs-keyword">from</span> <span class="hljs-string">'./country'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> CityTC = TypeComposer.create(<span class="hljs-string">`
  type City {
    code: String!
    name: String!
    population: Number
    countryCode: String
    tz: String
  }
`</span>);

<span class="hljs-comment">// Define some additional fields</span>
CityTC.addFields({
  <span class="hljs-attr">ucName</span>: { <span class="hljs-comment">// standard GraphQL like field definition</span>
    type: GraphQLString,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">source</span>) =&gt;</span> source.name.toUpperCase(),
  },
  <span class="hljs-attr">currentLocalTime</span>: { <span class="hljs-comment">// extended GraphQL Compose field definition</span>
    type: <span class="hljs-string">'Date'</span>,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function">(<span class="hljs-params">source</span>) =&gt;</span> moment().tz(source.tz).format(),
    <span class="hljs-attr">projection</span>: { <span class="hljs-attr">tz</span>: <span class="hljs-literal">true</span> }, <span class="hljs-comment">// load `tz` from database, when requested only `localTime` field</span>
  },
  <span class="hljs-attr">counter</span>: <span class="hljs-string">'Int'</span>, <span class="hljs-comment">// shortening for only type definition for field</span>
  complex: <span class="hljs-string">`type ComplexType {
    subField1: String
    subField2: Float
    subField3: Boolean
    subField4: ID
    subField5: JSON
    subField6: Date
  }`</span>,
  <span class="hljs-attr">list0</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'[String]'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'Array of strings'</span>,
  },
  <span class="hljs-attr">list1</span>: <span class="hljs-string">'[String]'</span>,
  <span class="hljs-attr">list2</span>: [<span class="hljs-string">'String'</span>],
  <span class="hljs-attr">list3</span>: [<span class="hljs-keyword">new</span> GraphQLOutputType(...)],
  <span class="hljs-attr">list4</span>: [<span class="hljs-string">`type Complex2Type { f1: Float, f2: Int }`</span>],
});

<span class="hljs-comment">// Add resolver method</span>
CityTC.addResolver({
  <span class="hljs-attr">kind</span>: <span class="hljs-string">'query'</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">'findMany'</span>,
  <span class="hljs-attr">args</span>: {
    <span class="hljs-attr">filter</span>: <span class="hljs-string">`input CityFilterInput {
      code: String!
    }`</span>,
    <span class="hljs-attr">limit</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'Int'</span>,
      <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">20</span>,
    },
    <span class="hljs-attr">skip</span>: <span class="hljs-string">'Int'</span>,
    <span class="hljs-comment">// ... other args if needed</span>
  },
  <span class="hljs-attr">type</span>: [CityTC], <span class="hljs-comment">// array of cities</span>
  resolve: <span class="hljs-keyword">async</span> ({ args, context }) =&gt; {
    <span class="hljs-keyword">return</span> context.someCityDB
      .findMany(args.filter)
      .limit(args.limit)
      .skip(args.skip);
  },
});

<span class="hljs-comment">// Add relation between City and Country by `countryCode` field.</span>
CityTC.addRelation( <span class="hljs-comment">// GraphQL relation definition</span>
  <span class="hljs-string">'country'</span>,
  () =&gt; ({
    <span class="hljs-attr">resolver</span>: CountryTC.getResolver(<span class="hljs-string">'findOne'</span>),
    <span class="hljs-attr">args</span>: {
      <span class="hljs-attr">filter</span>: <span class="hljs-function"><span class="hljs-params">source</span> =&gt;</span> ({ <span class="hljs-attr">code</span>: <span class="hljs-string">`<span class="hljs-subst">${source.countryCode}</span>`</span> }),
    },
    <span class="hljs-attr">projection</span>: { <span class="hljs-attr">countryCode</span>: <span class="hljs-literal">true</span> },
  })
);

<span class="hljs-comment">// Remove `tz` field from schema</span>
CityTC.removeField(<span class="hljs-string">'tz'</span>);

<span class="hljs-comment">// Add description to field</span>
CityTC.extendField(<span class="hljs-string">'name'</span>, {
  <span class="hljs-attr">description</span>: <span class="hljs-string">'City name'</span>,
});
</code></pre>
<p>schema.js</p>
<pre><code class="hljs css js"><span class="hljs-keyword">import</span> { GQC } <span class="hljs-keyword">from</span> <span class="hljs-string">'graphql-compose'</span>;
<span class="hljs-keyword">import</span> { CityTC } <span class="hljs-keyword">from</span> <span class="hljs-string">'./city'</span>;
<span class="hljs-keyword">import</span> { CountryTC } <span class="hljs-keyword">from</span> <span class="hljs-string">'./country'</span>;

GQC.rootQuery().addFields({
  <span class="hljs-attr">cities</span>: CityTC.getResolver(<span class="hljs-string">'findMany'</span>),
  <span class="hljs-attr">country</span>: CountryTC.getResolver(<span class="hljs-string">'findOne'</span>),
  <span class="hljs-attr">currentTime</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'Date'</span>,
    <span class="hljs-attr">resolve</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> <span class="hljs-built_in">Date</span>.now(),
  },
});

GQC.rootMutation().addFields({
  <span class="hljs-attr">createCity</span>: CityTC.getResolver(<span class="hljs-string">'createOne'</span>),
  <span class="hljs-attr">updateCity</span>: CityTC.getResolver(<span class="hljs-string">'updateById'</span>),
  ...adminAccess({
    <span class="hljs-attr">removeCity</span>: CityTC.getResolver(<span class="hljs-string">'removeById'</span>),
  }),
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">adminAccess</span>(<span class="hljs-params">resolvers</span>) </span>{
  <span class="hljs-built_in">Object</span>.keys(resolvers).forEach(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> {
    resolvers[k] = resolvers[k].wrapResolve(<span class="hljs-function"><span class="hljs-params">next</span> =&gt;</span> rp =&gt; {
      <span class="hljs-comment">// rp = resolveParams = { source, args, context, info }</span>
      <span class="hljs-keyword">if</span> (!rp.context.isAdmin) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'You should be admin, to have access to this action.'</span>);
      }
      <span class="hljs-keyword">return</span> next(rp);
    });
  });
  <span class="hljs-keyword">return</span> resolvers;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> GQC.buildSchema();
</code></pre>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="installation.html">← Installation</a><a class="docs-next button" href="generate-typecomposer.html">Generate TypeComposer →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/graphql-compose/" class="nav-home"><img src="/graphql-compose/img/logo.png" alt="graphql-compose" width="66" height="58"/></a><div><h5>Docs</h5><a href="/graphql-compose/docs/guide.html">Getting Started</a><a href="/graphql-compose/docs/api-reference.html">API Reference</a></div><div><h5>Community</h5><a href="https://twitter.com/nodkz" target="_blank">Twitter</a></div><div><h5>More</h5><a href="https://github.com/graphql-compose/graphql-compose">GitHub</a><a class="github-button" href="https://github.com/graphql-compose/graphql-compose" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/graphql-compose/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2018 Facebook Inc.</section></footer></div></body></html>